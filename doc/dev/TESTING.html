<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(3)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(3) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(5) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(5) > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(5) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; } </style> <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZCWEYB9KVG"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-ZCWEYB9KVG', { 'anonymize_ip': true }); </script> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Testing | F3D</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Testing" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="F3D - Fast and minimalist 3D viewer" /> <meta property="og:description" content="F3D - Fast and minimalist 3D viewer" /> <link rel="canonical" href="https://f3d.app//doc/dev/TESTING.html" /> <meta property="og:url" content="https://f3d.app//doc/dev/TESTING.html" /> <meta property="og:site_name" content="F3D" /> <meta property="og:image" content="https://user-images.githubusercontent.com/3129530/201317344-092db03d-8616-45b9-b606-30d22cda2eff.png" /> <meta property="og:image:height" content="1200" /> <meta property="og:image:width" content="630" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://user-images.githubusercontent.com/3129530/201317344-092db03d-8616-45b9-b606-30d22cda2eff.png" /> <meta property="twitter:title" content="Testing" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"F3D - Fast and minimalist 3D viewer","headline":"Testing","image":{"height":1200,"width":630,"url":"https://user-images.githubusercontent.com/3129530/201317344-092db03d-8616-45b9-b606-30d22cda2eff.png","@type":"imageObject"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://f3d.app//resources/logotype.svg"}},"url":"https://f3d.app//doc/dev/TESTING.html"}</script> <!-- End Jekyll SEO tag --> <link rel="shortcut icon" href="https://raw.githubusercontent.com/f3d-app/f3d/master/resources/logo.ico" type="image/x-icon" /> <script type="application/javascript" src="/assets/main.js" ></script> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="F3D"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/doc/GALLERY.html" class="nav-list-link">Gallery</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in User Documentation category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/doc/user/README_USER.html" class="nav-list-link">User Documentation</a><ul class="nav-list"><li class="nav-list-item"><a href="/doc/user/QUICKSTART.html" class="nav-list-link">Quickstart</a></li><li class="nav-list-item"><a href="/doc/user/INSTALLATION.html" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="/doc/user/SUPPORTED_FORMATS.html" class="nav-list-link">Supported File Formats</a></li><li class="nav-list-item"><a href="/doc/user/OPTIONS.html" class="nav-list-link">Options</a></li><li class="nav-list-item"><a href="/doc/user/INTERACTIONS.html" class="nav-list-link">Interactions</a></li><li class="nav-list-item"><a href="/doc/user/ANIMATIONS.html" class="nav-list-link">Animations</a></li><li class="nav-list-item"><a href="/doc/user/CONFIGURATION_FILE.html" class="nav-list-link">Configuration File</a></li><li class="nav-list-item"><a href="/doc/user/COMMANDS.html" class="nav-list-link">Commands</a></li><li class="nav-list-item"><a href="/doc/user/PARSING.html" class="nav-list-link">Parsing options</a></li><li class="nav-list-item"><a href="/doc/user/COLOR_MAPS.html" class="nav-list-link">Color maps</a></li><li class="nav-list-item"><a href="/doc/user/FINAL_SHADER.html" class="nav-list-link">Final shaders</a></li><li class="nav-list-item"><a href="/doc/user/DESKTOP_INTEGRATION.html" class="nav-list-link">Desktop Integration</a></li><li class="nav-list-item"><a href="/doc/user/PLUGINS.html" class="nav-list-link">Plugins</a></li><li class="nav-list-item"><a href="/doc/user/LIMITATIONS_AND_TROUBLESHOOTING.html" class="nav-list-link">Limitations and Troubleshooting</a></li><li class="nav-list-item"><a href="/doc/user/SPONSORING.html" class="nav-list-link">Sponsoring</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in libf3d Documentation category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/doc/libf3d/README_LIBF3D.html" class="nav-list-link">libf3d Documentation</a><ul class="nav-list"><li class="nav-list-item"><a href="/doc/libf3d/OVERVIEW.html" class="nav-list-link">Overview</a></li><li class="nav-list-item"><a href="/doc/libf3d/CLASSES.html" class="nav-list-link">Classes Introduction</a></li><li class="nav-list-item"><a href="/doc/libf3d/OPTIONS.html" class="nav-list-link">Options</a></li><li class="nav-list-item"><a href="/doc/libf3d/LANGUAGE_BINDINGS.html" class="nav-list-link">Language Bindings</a></li><li class="nav-list-item"><a href="/doc/libf3d/PLUGINS.html" class="nav-list-link">Plugin SDK</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Developer Documentation category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/doc/dev/README_DEV.html" class="nav-list-link">Developer Documentation</a><ul class="nav-list"><li class="nav-list-item"><a href="/doc/dev/GETTING_STARTED.html" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><a href="/doc/dev/BUILD.html" class="nav-list-link">Build</a></li><li class="nav-list-item"><a href="/doc/dev/TESTING.html" class="nav-list-link">Testing</a></li><li class="nav-list-item"><a href="/CONTRIBUTING.html" class="nav-list-link">Contribute</a></li><li class="nav-list-item"><a href="/doc/dev/GENERATE.html" class="nav-list-link">Generate</a></li><li class="nav-list-item"><a href="/doc/dev/ARCHITECTURE.html" class="nav-list-link">Architecture</a></li><li class="nav-list-item"><a href="/doc/dev/CODING_STYLE.html" class="nav-list-link">Coding style</a></li><li class="nav-list-item"><a href="/doc/dev/ROADMAPS_AND_RELEASES.html" class="nav-list-link">Roadmaps and release cycle</a></li><li class="nav-list-item"><a href="/doc/dev/GOVERNANCE.html" class="nav-list-link">Governance</a></li><li class="nav-list-item"><a href="/doc/dev/MAINTAINERS_AND_CONTRIBUTORS.html" class="nav-list-link">Maintainers and Contributors</a></li><li class="nav-list-item"><a href="/CODE_OF_CONDUCT.html" class="nav-list-link">Code of conduct</a></li><li class="nav-list-item"><a href="/doc/dev/BUILD_WASM.html" class="nav-list-link">Build (WebAssembly)</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Licenses category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/_licenses.html" class="nav-list-link">Licenses</a><ul class="nav-list"><li class="nav-list-item"><a href="/LICENSE.html" class="nav-list-link">License</a></li><li class="nav-list-item"><a href="/doc/THIRD_PARTY_LICENSES.html" class="nav-list-link">Third Party Licenses</a></li></ul></li><li class="nav-list-item"><a href="/doc/CHANGELOG.html" class="nav-list-link">Changelog</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://f3d.app/doc/user/INSTALLATION.html" class="nav-list-link external" > Download F3D <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://github.com/f3d-app/f3d" class="nav-list-link external" > GitHub repository <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://f3d.app/web" class="nav-list-link external" > Web viewer <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search F3D" aria-label="Search F3D" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/f3d-app/f3d" class="site-button" target="_blank" rel="noopener noreferrer" > <img src="https://user-images.githubusercontent.com/3129530/197903476-11d9c41d-73b0-461f-93e8-c8c00c680e6e.png" width="30px"> </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/doc/dev/README_DEV.html">Developer Documentation</a></li> <li class="breadcrumb-nav-list-item"><span>Testing</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="testing"> <a href="#testing" class="anchor-heading" aria-labelledby="testing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing </h1> <p>F3D has an extensive suite of tests that can be run locally, either to validate your build or because you are contributing to F3D and want to add/modify a test.</p> <h2 id="cmake-options"> <a href="#cmake-options" class="anchor-heading" aria-labelledby="cmake-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CMake Options </h2> <p>There are a few CMake options to configure the F3D testing framework:</p> <ul> <li><code class="language-plaintext highlighter-rouge">BUILD_TESTING</code>: Enable the test framework, off by default. Requires <a href="https://git-lfs.com/">git LFS</a> if repository is cloned.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_RENDERING_TESTS</code>: An option to enable/disable test that require rendering capabilities, on by default.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_LONG_TIMEOUT_TESTS</code>: Certain tests can take some time to run, off by default, requires rendering tests.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_FORCE_RENDERING_BACKEND</code>: Configure the rendering backend to use. Can be <code class="language-plaintext highlighter-rouge">auto</code> (default), <code class="language-plaintext highlighter-rouge">glx</code>, <code class="language-plaintext highlighter-rouge">wgl</code>, <code class="language-plaintext highlighter-rouge">egl</code> or <code class="language-plaintext highlighter-rouge">osmesa</code>.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_GLX_TESTS</code>: Enable tests requiring a X11 server running on Linux.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_OSMESA_TESTS</code>: Enable tests requiring OSMesa dependency.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_EGL_TESTS</code>: Enable tests requiring EGL dependency.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_EXTERNAL_GLFW</code>: Enable libf3d tests requiring GLFW dependency.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_EXTERNAL_QT</code>: Enable libf3d tests requiring QT dependency.</li> </ul> <h2 id="running-the-tests"> <a href="#running-the-tests" class="anchor-heading" aria-labelledby="running-the-tests"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the tests </h2> <p>To run all tests, build and then run <code class="language-plaintext highlighter-rouge">ctest</code> from the build directory:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake --build .
ctest
</code></pre></div></div> <p>To run a specific test, use the <code class="language-plaintext highlighter-rouge">ctest -R &lt;testname&gt;</code> option:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctest -R PLY
</code></pre></div></div> <h2 id="testing-architecture"> <a href="#testing-architecture" class="anchor-heading" aria-labelledby="testing-architecture"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing architecture </h2> <p>There are multiple layers of tests to ensure that testing covers all aspects of the application. The layers of the application are</p> <ul> <li>Application layer</li> <li>Library layer</li> <li>Bindings layer</li> <li>VTK Extension layer</li> </ul> <p>When contributing to F3D, it is necessary that new code is covered by a test in at least one layer above. Additional tests can be created in other layers, depending on the change.</p> <h3 id="application-layer"> <a href="#application-layer" class="anchor-heading" aria-labelledby="application-layer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Application layer </h3> <p>All application tests are initiated via the <code class="language-plaintext highlighter-rouge">CTest</code> (https://cmake.org/cmake/help/book/mastering-cmake/chapter/Testing%20With%20CMake%20and%20CTest.html) testing framework. <code class="language-plaintext highlighter-rouge">CTest</code> runs <code class="language-plaintext highlighter-rouge">f3d</code> with the <code class="language-plaintext highlighter-rouge">--output</code> and `â€“reference arguments which renders an output image and compares it to a reference image. F3D compares the differences between the 2 images and compute a difference value and compare it to a threshold to check if a test passes or not.</p> <p>All aspects of the application test framework are handled in <code class="language-plaintext highlighter-rouge">application/testing/CMakeLists.txt</code>.</p> <p>Usually, adding a test is as simple as adding a line like this one:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f3d_test(NAME TestName DATA datafile.ext ARGS --args-to-test)
</code></pre></div></div> <p>where</p> <ul> <li><code class="language-plaintext highlighter-rouge">NAME</code> should be the name of the test, which must be unique</li> <li><code class="language-plaintext highlighter-rouge">DATA</code> should be a file in <code class="language-plaintext highlighter-rouge">testing/data</code> directory, though adding a new file is possible</li> <li><code class="language-plaintext highlighter-rouge">ARGS</code> should be the F3D options to pass to the f3d executable, if any</li> </ul> <p>Once the new test has been added, configure and build F3D, then run the test (<code class="language-plaintext highlighter-rouge">-VV</code> for verbose output):</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctest -R TestName -VV
</code></pre></div></div> <p>The test will run and fail but an image output will be generated in the build directory, namely <code class="language-plaintext highlighter-rouge">Testing/Temporary/TestName.png</code>. Visually check that the generated file looks as expected, then add it to the F3D sources in <code class="language-plaintext highlighter-rouge">testing/baselines</code>. Rerun the test, it should now pass.</p> <p>There is many other keywords in the <code class="language-plaintext highlighter-rouge">f3d_test</code> macro, here is a non exhaustive list:</p> <ul> <li><code class="language-plaintext highlighter-rouge">TONE_MAPPING</code>: Tests that uses tone mapping so they can be disabled with old VTK version</li> <li><code class="language-plaintext highlighter-rouge">LONG_TIMEOUT</code>: Tests that takes a long time to run, so they can be disabled on weaker CI machines</li> <li><code class="language-plaintext highlighter-rouge">INTERACTION</code>: Interaction test, see below</li> <li><code class="language-plaintext highlighter-rouge">INTERACTION_CONFIGURE</code>: A special kind of interaction tests that require configuring the interaction log using CMake, eg drag and drop tests.</li> <li><code class="language-plaintext highlighter-rouge">NO_BASELINE</code>: Test that have no baselines and do not perform a rendering comparison at the end, usually combined with <code class="language-plaintext highlighter-rouge">REGEXP</code></li> <li><code class="language-plaintext highlighter-rouge">NO_RENDER</code>: Tests that do not require rendering capability at all, usually combined with <code class="language-plaintext highlighter-rouge">REGEXP</code></li> <li><code class="language-plaintext highlighter-rouge">NO_OUTPUT</code>: Tests that do not have an automatic <code class="language-plaintext highlighter-rouge">--output</code>, may still use <code class="language-plaintext highlighter-rouge">BASELINE</code> or define <code class="language-plaintext highlighter-rouge">--output</code> manually</li> <li><code class="language-plaintext highlighter-rouge">WILL_FAIL</code>: Tests that should fail in order to pass</li> <li><code class="language-plaintext highlighter-rouge">NO_DATA_FORCE_RENDER</code>: Tests that do not open any data yet require a rendering tests at the end, rely on an environment variable</li> <li><code class="language-plaintext highlighter-rouge">UI</code>: Tests that show the ImGui UI, hence require it to be present in order to be enabled</li> </ul> <h3 id="recovering-baselines-from-ci"> <a href="#recovering-baselines-from-ci" class="anchor-heading" aria-labelledby="recovering-baselines-from-ci"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Recovering baselines from CI </h3> <p>Occasionally you may need to recover a baseline from the CI. If this is required, create a PR and let the test run and fail on CI. Check the actions run summary on Github and download the appropriate <code class="language-plaintext highlighter-rouge">baseline</code> archive. Extract the archive and navigate to the <code class="language-plaintext highlighter-rouge">build/Testing/Temporary/TestName.png</code>. Visually check that the generated file looks as expected, then add it to the F3D sources in <code class="language-plaintext highlighter-rouge">testing/baselines</code>.</p> <h3 id="creating-interaction-tests"> <a href="#creating-interaction-tests" class="anchor-heading" aria-labelledby="creating-interaction-tests"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating Interaction tests </h3> <p>Sometimes you may contribute changes that affect how the end user interacts with F3D, example, toggling orthographic projection on/off or zooming in/out of the rendered image. These human interactions are simulated by interaction tests. F3D has the functionality to record human interactions such as mouse wheel scrolls, mouse movements as well as keypresses to a file. This functionality is enabled by running</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f3d --interaction-test-record ./TestName.log
</code></pre></div></div> <p>where</p> <ul> <li><code class="language-plaintext highlighter-rouge">TestName</code> should be the name of the test case.</li> </ul> <p>While recording the interaction, care should be taken to perform the minimum number of events to simulate the interaction. For example, if you want to simulate the number <code class="language-plaintext highlighter-rouge">5</code> being pressed, there should be no mouse events or other keypress events during the recording of the interaction. The interaction file is saved when <code class="language-plaintext highlighter-rouge">f3d</code> is exited.</p> <p>Another interaction to avoid the one that quit F3D as it will have unexpected behavior when being replayed. Instead, quit the F3D application by using your window manager or Ctrl+C in the terminal.</p> <p>You can verify that your interaction file is correct by playing back the interaction</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f3d --interaction-test-play ./TestName.log
</code></pre></div></div> <p>Interactions that are not needed for the test can be removed manually. After verifying that the interaction file works as expected, copy it to <code class="language-plaintext highlighter-rouge">./testing/recordings</code>. The name of the interaction file should be the same as the test name. The interaction test case can then be created by adding</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f3d_test(NAME TestName DATA datafile.ext INTERACTION)
</code></pre></div></div> <p>to <code class="language-plaintext highlighter-rouge">application/testing/CMakeLists.txt</code></p> <p>where</p> <ul> <li><code class="language-plaintext highlighter-rouge">INTERACTION</code> signifies that this is an interaction test</li> </ul> <p>The steps to running the test are the same as above.</p> <h3 id="library-layer"> <a href="#library-layer" class="anchor-heading" aria-labelledby="library-layer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Library layer </h3> <p>When for some reason adding a test in the application layer is not possible, it is possible to add a C++ test in the library layer. These tests are simple C++ methods that should return <code class="language-plaintext highlighter-rouge">EXIT_SUCCESS</code> or <code class="language-plaintext highlighter-rouge">EXIT_FAILURE</code>.</p> <p>Library test cases are handled in <code class="language-plaintext highlighter-rouge">library/testing</code>.</p> <p>To add a test, create a new <code class="language-plaintext highlighter-rouge">TestSDKName.cxx</code> file containing a <code class="language-plaintext highlighter-rouge">int TestSDKName(int argc, char* argv[])</code> method, then implement your test in C++ using the <a href="../libf3d/README.md">libf3d</a> API. Then add you new file to <code class="language-plaintext highlighter-rouge">src/library/testing/CMakeLists.txt</code>.</p> <p>It is supported to read file as input and perform image comparison against baselines as an output, see other tests as examples.</p> <h3 id="bindings-layer"> <a href="#bindings-layer" class="anchor-heading" aria-labelledby="bindings-layer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bindings layer </h3> <p>The libf3d supports multiple bindings, including Python, Java and Javascript.</p> <p>When improving/modifying these bindings, it is necessary to also improve/modify the bindings tests accordingly. Please take a look into <code class="language-plaintext highlighter-rouge">&lt;java/python/webassembly&gt;/testing</code> for examples to follow.</p> <h3 id="vtkextensions-layer"> <a href="#vtkextensions-layer" class="anchor-heading" aria-labelledby="vtkextensions-layer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> VTKExtensions layer </h3> <p>When for some reason adding a test in the application or library layer is not possible, it is possible to add a C++ test in the VTKExtensions layer. These tests are simple C++ methods that should return <code class="language-plaintext highlighter-rouge">EXIT_SUCESS</code> or <code class="language-plaintext highlighter-rouge">EXIT_FAILURE</code>.</p> <p>Everything is handled in <code class="language-plaintext highlighter-rouge">library/VTKExtensions/ModuleName/Testing</code>.</p> <p>To add a test, first identify which VTKExtensions module you need to add a test into, then create a new <code class="language-plaintext highlighter-rouge">TestName.cxx</code> file containing a <code class="language-plaintext highlighter-rouge">int TestName(int argc, char* argv[])</code> method, then implement your test in C++ using VTK and F3D VTKExtensions modules. Then add you new file to <code class="language-plaintext highlighter-rouge">library/VTKExtensions/ModuleName/Testing/CMakeLists.txt</code>.</p> <p>It is supported to read file as input if needed, see other tests as examples.</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
