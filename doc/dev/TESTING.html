<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZCWEYB9KVG"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-ZCWEYB9KVG', { 'anonymize_ip': true }); </script> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Testing | F3D</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Testing" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="F3D - Fast and minimalist 3D viewer" /> <meta property="og:description" content="F3D - Fast and minimalist 3D viewer" /> <link rel="canonical" href="https://f3d.app//doc/dev/TESTING.html" /> <meta property="og:url" content="https://f3d.app//doc/dev/TESTING.html" /> <meta property="og:site_name" content="F3D" /> <meta property="og:image" content="https://user-images.githubusercontent.com/3129530/201317344-092db03d-8616-45b9-b606-30d22cda2eff.png" /> <meta property="og:image:height" content="1200" /> <meta property="og:image:width" content="630" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://user-images.githubusercontent.com/3129530/201317344-092db03d-8616-45b9-b606-30d22cda2eff.png" /> <meta property="twitter:title" content="Testing" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"F3D - Fast and minimalist 3D viewer","headline":"Testing","image":{"height":1200,"width":630,"url":"https://user-images.githubusercontent.com/3129530/201317344-092db03d-8616-45b9-b606-30d22cda2eff.png","@type":"imageObject"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://f3d.app//resources/logotype.svg"}},"url":"https://f3d.app//doc/dev/TESTING.html"}</script> <!-- End Jekyll SEO tag --> <link rel="shortcut icon" href="https://raw.githubusercontent.com/f3d-app/f3d/master/resources/logo.ico" type="image/x-icon"> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/doc/GALLERY.html" class="nav-list-link">Gallery</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in User Documentation category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/doc/user/README_USER.html" class="nav-list-link">User Documentation</a><ul class="nav-list"><li class="nav-list-item "><a href="/doc/user/USAGE.html" class="nav-list-link">Usage</a></li><li class="nav-list-item "><a href="/doc/user/INSTALLATION.html" class="nav-list-link">Installation</a></li><li class="nav-list-item "><a href="/doc/user/OPTIONS.html" class="nav-list-link">Options</a></li><li class="nav-list-item "><a href="/doc/user/INTERACTIONS.html" class="nav-list-link">Interactions</a></li><li class="nav-list-item "><a href="/doc/user/CONFIGURATION_FILE.html" class="nav-list-link">Configuration File</a></li><li class="nav-list-item "><a href="/doc/user/DESKTOP_INTEGRATION.html" class="nav-list-link">Desktop Integration</a></li><li class="nav-list-item "><a href="/doc/user/LIMITATIONS_AND_TROUBLESHOOTING.html" class="nav-list-link">Limitations and Troubleshooting</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in libf3d Documentation category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/doc/libf3d/README_LIBF3D.html" class="nav-list-link">libf3d Documentation</a><ul class="nav-list"><li class="nav-list-item "><a href="/doc/libf3d/OVERVIEW.html" class="nav-list-link">Overview</a></li><li class="nav-list-item "><a href="/doc/libf3d/CLASSES.html" class="nav-list-link">Classes Introduction</a></li><li class="nav-list-item "><a href="/doc/libf3d/OPTIONS.html" class="nav-list-link">Options</a></li><li class="nav-list-item "><a href="/doc/libf3d/BINDINGS.html" class="nav-list-link">Bindings</a></li><li class="nav-list-item "><a href="/doc/libf3d/PLUGINS.html" class="nav-list-link">Plugin SDK</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Developer Documentation category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/doc/dev/README_DEV.html" class="nav-list-link">Developer Documentation</a><ul class="nav-list"><li class="nav-list-item "><a href="/doc/dev/BUILD.html" class="nav-list-link">Build</a></li><li class="nav-list-item active"><a href="/doc/dev/TESTING.html" class="nav-list-link active">Testing</a></li><li class="nav-list-item "><a href="/doc/dev/GENERATE.html" class="nav-list-link">Generate</a></li><li class="nav-list-item "><a href="/doc/dev/CODING_STYLE.html" class="nav-list-link">Coding Style</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Licenses category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/_licenses.html" class="nav-list-link">Licenses</a><ul class="nav-list"><li class="nav-list-item "><a href="/LICENSE.html" class="nav-list-link">License</a></li><li class="nav-list-item "><a href="/doc/THIRD_PARTY_LICENSES.html" class="nav-list-link">Third Party Licenses</a></li></ul></li><li class="nav-list-item"><a href="/doc/CHANGELOG.html" class="nav-list-link">Changelog</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/f3d-app/f3d/releases" class="nav-list-link external"> Download F3D <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search F3D" aria-label="Search F3D" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/f3d-app/f3d" class="site-button" target="_blank" rel="noopener noreferrer" > <img src="https://user-images.githubusercontent.com/3129530/197903476-11d9c41d-73b0-461f-93e8-c8c00c680e6e.png" width="30px"> </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/doc/dev/README_DEV.html">Developer Documentation</a></li> <li class="breadcrumb-nav-list-item"><span>Testing</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="testing"> <a href="#testing" class="anchor-heading" aria-labelledby="testing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing </h1> <p>F3D has an expansive suite of tests, you may want to run them locally, either to validate your build or because you are contributing to F3D and want to add/modify a test.</p> <h2 id="cmake-options"> <a href="#cmake-options" class="anchor-heading" aria-labelledby="cmake-options"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CMake Options </h2> <p>There is a few CMake options to F3D testing configuration:</p> <ul> <li><code class="language-plaintext highlighter-rouge">BUILD_TESTING</code>: Enable the tests, off by default.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_RENDERING_TESTS</code>: An option to enable/disable test that require rendering capabilities, on by default.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_LONG_TIMEOUT_TESTS</code>: Certain tests can take some time to run, off by default, requires rendering tests.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_ENABLE_HDRI_TESTS</code>: An option to enable/disable test that uses HDRis, on by default if rendering and long tests are enabled.</li> <li><code class="language-plaintext highlighter-rouge">F3D_TESTING_DISABLE_DEFAULT_LIGHTS_TESTS_COMPARISON</code>: With VTK &lt; 9.0.0, rendering can be very different, although not incorrect, so this option is provided, off by default.</li> </ul> <h2 id="running-the-tests"> <a href="#running-the-tests" class="anchor-heading" aria-labelledby="running-the-tests"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the tests </h2> <p>To run the tests, just use ctest from the build directory:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctest
</code></pre></div></div> <p>To run a specific test, use the -R ctest option:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctest -R PLY
</code></pre></div></div> <h2 id="testing-architecture"> <a href="#testing-architecture" class="anchor-heading" aria-labelledby="testing-architecture"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing architecture </h2> <p>There is multiple layers of tests to ensure F3D test coverage is as high as possible</p> <ul> <li>Application layer</li> <li>Library layer</li> <li>Bindings layer</li> <li>VTK Extension layer</li> </ul> <p>When contributing to F3D, it is necessary that any new code is covered by at least one layer of test, but it could make sense to cover it with more if necessary.</p> <h3 id="application-layer"> <a href="#application-layer" class="anchor-heading" aria-labelledby="application-layer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Application layer </h3> <p>All application test are just a command line run by ctest using the <code class="language-plaintext highlighter-rouge">f3d</code> executable. ctest then check the output for any failure. Most of these tests are just using the <code class="language-plaintext highlighter-rouge">--output</code> and <code class="language-plaintext highlighter-rouge">--ref</code> F3D option in order to check if a rendering behave correctly with specific options.</p> <p>Everything is handled in <code class="language-plaintext highlighter-rouge">cmake/testing.cmake</code>.</p> <p>Usually, adding a test is a simple as adding a line like this one:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f3d_test(NAME TestName DATA datafile.ext ARGS --args-to-test DEFAULT_LIGHTS)
</code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">NAME</code> should be the name of the test, which must be unique</li> <li><code class="language-plaintext highlighter-rouge">DATA</code> should be a file in <code class="language-plaintext highlighter-rouge">testing/data</code> directory, though adding new file is possible</li> <li><code class="language-plaintext highlighter-rouge">ARGS</code> should be the F3D options to pass to the f3d executable, if any</li> <li><code class="language-plaintext highlighter-rouge">DEFAULT_LIGHTS</code> is expected when performing baselines comparison</li> </ul> <p>Once the new test has been added, configure and build F3D, then run the test once:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ctest -R TestName
</code></pre></div></div> <p>The test will fail but an image output will be generated in you build in <code class="language-plaintext highlighter-rouge">Testing/Temporary/TestName.png</code>. Visually check that the generated file looks as expected, then add it to the F3D sources in <code class="language-plaintext highlighter-rouge">testing/baselines</code>. Rerun the test, it should now pass.</p> <h3 id="library-layer"> <a href="#library-layer" class="anchor-heading" aria-labelledby="library-layer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Library layer </h3> <p>When for some reason adding a test in the application layer is not possible, it is possible to add a C++ test in the library layer. These tests are simple C++ methods that should return <code class="language-plaintext highlighter-rouge">EXIT_SUCCESS</code> or <code class="language-plaintext highlighter-rouge">EXIT_FAILURE</code>.</p> <p>Everything is handled in <code class="language-plaintext highlighter-rouge">src/library/testing</code>.</p> <p>To add a test, create a new <code class="language-plaintext highlighter-rouge">TestName.cxx</code> file containing a <code class="language-plaintext highlighter-rouge">int TestName(int argc, char* argv[])</code> method, then implement your test in C++ using the <a href="../libf3d/README.md">libf3d</a> API. Then add you new file to <code class="language-plaintext highlighter-rouge">src/library/testing/CMakeLists.txt</code>.</p> <p>It is supported to read file as input and perform image comparison against baselines as an output, see other tests as examples.</p> <h3 id="bindings-layer"> <a href="#bindings-layer" class="anchor-heading" aria-labelledby="bindings-layer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bindings layer </h3> <p>The libf3d supports multiple bindings, including Java and Python.</p> <p>When improving/modifying these bindings, it is necessary to also improve/modify the bindings tests accordingly. Please take a look into <code class="language-plaintext highlighter-rouge">src/&lt;bindings&gt;/testing</code> for examples to follow.</p> <h3 id="vtkextensions-layer"> <a href="#vtkextensions-layer" class="anchor-heading" aria-labelledby="vtkextensions-layer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> VTKExtensions layer </h3> <p>When for some reason adding a test in the application or library layer is not possible, it is possible to add a C++ test in the VTKExtensions layer. These tests are simple C++ methods that should return <code class="language-plaintext highlighter-rouge">EXIT_SUCESS</code> or <code class="language-plaintext highlighter-rouge">EXIT_FAILURE</code>.</p> <p>Everything is handled in <code class="language-plaintext highlighter-rouge">src/library/VTKExtensions/ModuleName/Testing</code>.</p> <p>To add a test, first identify which VTKExtensions module you need to add a test into, then create a new <code class="language-plaintext highlighter-rouge">TestName.cxx</code> file containing a <code class="language-plaintext highlighter-rouge">int TestName(int argc, char* argv[])</code> method, then implement your test in C++ using VTK and F3D VTKExtensions modules. Then add you new file to <code class="language-plaintext highlighter-rouge">src/library/VTKExtensions/ModuleName/Testing/CMakeLists.txt</code>.</p> <p>It is supported to read file as input if needed, see other tests as examples.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
